---
title: "Ações Pós-Chamada"
icon: "webhook"
description: "Extraia dados da chamada e envie para um aplicativo/webhook para fluxos de trabalho automatizados. "
---

**Configure o que acontece após o término das chamadas – extraia informações específicas das conversas e envie para sistemas externos para processamento adicional.**

## Visão Geral

Ações pós-chamada automaticamente:

- Extraem dados estruturados das conversas usando IA
- Enviam as variáveis extraídas para webhooks para automação
- Disparam fluxos de trabalho em plataformas conectadas
- Atualizam registros de CRM e bancos de dados
- Permitem cenários complexos de automação

**Variáveis Pós-Chamada**

Defina as variáveis que a IA irá extrair da chamada e enviar para um webhook.

**Configuração de Variáveis**

Configure quais informações a IA deve extrair de cada conversa:

<AccordionGroup>
  <Accordion title="Definição de Variável" icon="code">
    **Crie variáveis que a IA irá identificar e extrair das conversas.**

    **Como a extração funciona:** A IA analisa toda a transcrição da chamada e considera o contexto do seu prompt do sistema para extrair as variáveis solicitadas. Ela compreende o que foi discutido durante a chamada e extrai informações relevantes com base nas descrições das suas variáveis.

    **Configuração:**

    - **Nome:** Identificador da variável (3-16 caracteres, minúsculo, alfanumérico)
    - **Tipo:** Tipo de dado do valor extraído
    - **Descrição:** Explicação clara para que a IA entenda o que extrair da conversa

    **Tipos de Variáveis:**

    - **String:** Valores de texto (nomes, endereços, comentários)
    - **Number:** Valores numéricos (quantidades, preços, pontuações)
    - **True/False:** Valores booleanos (respostas sim/não, objetivos atingidos)
  </Accordion>
  <Accordion title="Variáveis Padrão" icon="list">
    **Cada assistente inclui essas variáveis essenciais por padrão:**

    - **Status (True/False):** Se o objetivo da chamada foi atingido ou não
    - **Resumo (String):** Resumo da chamada em poucas palavras

    Você pode adicionar variáveis personalizadas com base no seu caso de uso específico.
  </Accordion>
  <Accordion title="Exemplos de Variáveis" icon="lightbulb">
    **Variáveis comuns para diferentes cenários:**

    **Qualificação de vendas:**

    - **budget (Number):** Faixa de orçamento do cliente
    - **decision_maker (True/False):** O interlocutor é o tomador de decisão
    - **timeline (String):** Quando precisam da solução
    - **pain_points (String):** Principais desafios mencionados

    **Agendamento de compromissos:**

    - **appointment_date (String):** Data preferida para o compromisso
    - **service_type (String):** Tipo de serviço solicitado
    - **contact_method (String):** Método de contato preferido

    **Chamadas de suporte:**

    - **issue_type (String):** Categoria do problema
    - **urgency_level (Number):** Nível de prioridade (1-10)
    - **resolution_status (True/False):** O problema foi resolvido
  </Accordion>
</AccordionGroup>

### Processo de Extração

<AccordionGroup>
  <Accordion title="Como a IA Extrai Variáveis" icon="brain">
    **A IA utiliza análise sofisticada para extrair variáveis das suas chamadas:**

    **Fontes de dados:**

    - **Transcrição completa da chamada:** Tudo que foi dito tanto pela IA quanto pelo cliente
    - **Contexto do prompt do sistema:** Os objetivos e instruções do seu assistente ajudam a guiar a extração
    - **Descrições das variáveis:** Descrições claras que você fornece para cada variável

    **Método de análise:**

    - A IA revisa toda a transcrição da conversa
    - Considera o prompt do sistema e os objetivos da chamada
    - Identifica informações relevantes com base nas descrições das variáveis
    - Extrai e formata os dados de acordo com os tipos especificados
    - Valida os valores extraídos antes de enviá-los para o webhook
  </Accordion>
</AccordionGroup>

### Boas Práticas

<Warning>
  **Nomeação de variáveis:** Use apenas caracteres minúsculos e alfanuméricos. Sem espaços ou caracteres especiais, exceto underscores (\_).
</Warning>

<Tip>
  **Descrições claras:** Escreva descrições que expliquem claramente o que a IA deve buscar na transcrição da conversa. Quanto mais específicas e contextualizadas, melhor a precisão da extração.
</Tip>

<Note>
  **Sinergia com o prompt do sistema:** As descrições das suas variáveis funcionam melhor quando estão alinhadas com os objetivos do prompt do sistema. Se sua assistente é projetada para qualificação de leads, suas variáveis devem refletir esse propósito.
</Note>

## Configurações de Webhook

**Faça uma requisição para uma URL que envie as variáveis extraídas para sistemas externos.**

### Configuração de Webhook

<AccordionGroup>
  <Accordion title="Status do Webhook" icon="check">
    **Ativado/Desativado:** Controle se os webhooks serão enviados após as chamadas

    **Padrão:** Desativado – Ative somente quando você tiver um endpoint de webhook pronto para receber os dados
  </Accordion>
  <Accordion title="Webhook URL" icon="link">
    **URL do endpoint:** Para onde enviar os dados extraídos

    **Formato:** Deve ser uma URL válida

    **Exemplo:** [https://automate.mayahub.ai/api/v1/webhooks/your-webhook-id](https://automate.autocalls.ai/api/v1/webhooks/your-webhook-id)

    **Testar funcionalidade:** Recurso de teste integrado envia dados de exemplo para verificar a conectividade
  </Accordion>
  <Accordion title="Opções de Entrega" icon="gear">
    **Enviar webhook apenas em chamadas concluídas:**

    - **Sim (Padrão):** Envia dados apenas para chamadas concluídas
    - **Não:** Envia dados para todas as chamadas, independentemente do status

    **Incluir gravação no webhook:**

    - **Sim (Padrão):** Inclui a URL da gravação no payload do webhook
    - **Não:** Envia apenas as variáveis extraídas, sem o link da gravação
  </Accordion>
</AccordionGroup>

### **Payload do Webhook**

O webhook receberá um payload JSON completo contendo detalhes da chamada, variáveis extraídas e a transcrição. Para a documentação completa da API, consulte a **API de Webhook Pós-Chamada**.

**Campos principais do payload:**

<AccordionGroup>
  <Accordion title="Informação da Chamada" icon="phone">
    - **id:** Identificador único da chamada

      **customer_phone:** Número de telefone do cliente (formato E.164)

      **assistant_phone:** Número de telefone da assistente

      **duration:** Duração da chamada em segundos

      **status:** Status da chamada _(initiated, ringing, busy, in-progress, ended, completed, ended_by_customer, ended_by_assistant, unanswered, failed)_

      **created_at/finished_at:** Carimbos de data e hora no formato ISO 8601
  </Accordion>
  <Accordion title="Variáveis Extraídas" icon="code">
    - **extracted_variables:** Dados extraídos pela IA com base na sua configuração de esquema pós-chamada _(veja a seção Variáveis Pós-Chamada acima)_

      **input_variables:** Variáveis passadas antes da chamada _(veja a seção Variáveis da Chamada)_

      Inclui as variáveis padrão _(status, summary)_ além das suas variáveis personalizadas
  </Accordion>
  <Accordion title="Dados da Conversa" icon="message">
    - **transcript:** Transcrição detalhada da conversa com carimbos de tempo

      **formatted_transcript:** Formato de conversa legível por humanos

      **recording_url:** URL da gravação da chamada _(se habilitado)_
  </Accordion>
  <Accordion title="Dados de Campanha e Lead" icon="users">
    - **lead:** Informações do lead _(para chamadas de campanha)_

      **campaign:** Detalhes e configurações da campanha

      Incluído apenas para chamadas que fazem parte de campanhas
  </Accordion>
</AccordionGroup>

**Examplo de Playload do Webhook:**

```json
{
  "id": 12345,
  "customer_phone": "+1234567890",
  "assistant_phone": "+1987654321",
  "duration": 125,
  "status": "completed",
  "extracted_variables": {
    "status": true,
    "summary": "Customer interested in product demo",
    "lead_quality": "high",
    "budget": 5000
  },
  "input_variables": {
    "customer_name": "John Doe",
    "product_interest": "Pro Plan"
  },
  "transcript": [
    {
      "text": "Hello! This is Sarah from Autocalls.",
      "type": "transcript",
      "sender": "bot",
      "timestamp": 1756812511.315143
    },
    {
      "text": "Hi, I'm doing well, thanks.",
      "type": "transcript", 
      "sender": "human",
      "timestamp": 1756812514.104436
    }
  ],
  "formatted_transcript": "AI: Hello! This is Sarah from Autocalls.\\nCustomer: Hi, I'm doing well, thanks.",
  "recording_url": "https://app.mayahub.ai/storage/recordings/call-12345.mp4",
  "created_at": "2025-01-15T10:30:00.000000Z",
  "finished_at": "2025-01-15T10:32:05.000000Z"
}
```

### Testando Webhooks

<Tip>
  **Teste antes de ir ao ar:** Use o botão **"Fazer requisição de teste"** para enviar dados de exemplo ao seu endpoint de webhook e verificar se está funcionando corretamente.
</Tip>

**Processo de Teste:**

1. Configure suas variáveis e a URL do webhook
2. Salve as configurações da sua assistente
3. Clique em **"Fazer requisição de teste"**
4. Verifique se seu endpoint de webhook recebe os dados de teste
5. Confirme se a estrutura do payload corresponde às suas expectativas

---

**Exemplos de Integração**

**Nossa Plataforma de Automação**

Integração principal: Use nossa plataforma de automação no-code integrada para fluxos de trabalho contínuos:

- Processamento direto via webhook: Não requer configuração externa
- Mais de 250 integrações com apps: Conecte a CRM, e-mail, calendários e mais
- Construtor visual de fluxos: Crie automações complexas sem código
- Sincronização de dados em tempo real: Processamento instantâneo das variáveis extraídas
- Modelos pré-construídos: Fluxos de trabalho prontos para cenários comuns

**Fluxos de automação comuns:**

- Atualizações de CRM: Atualize automaticamente registros de contatos no HubSpot, Salesforce, Pipedrive
- Follow-ups por e-mail: Envie e-mails personalizados com base nos resultados das chamadas
- Pontuação de leads: Atualize scores de leads com base nas variáveis extraídas
- Agendamento de compromissos: Marque reuniões de follow-up automaticamente
- Notificações de equipe: Alerta membros da equipe sobre chamadas importantes

---

**Plataformas Externas**

Qualquer plataforma com suporte a webhooks:

- Receba dados de webhook da nossa plataforma
- Processe variáveis extraídas em seus próprios sistemas
- Crie fluxos de automação personalizados
- Integre com qualquer API ou serviço que aceite webhooks

**Casos de uso:**

- Conectar a qualquer CRM, plataforma de e-mail ou ferramenta de negócios
- Enviar dados para aplicativos personalizados
- Acionar fluxos de trabalho em plataformas de automação de terceiros
- Armazenar dados em bancos de dados ou sistemas externos

---

**Desenvolvimento Personalizado**

- **Endpoints de API:** Construa receptores personalizados para os dados do webhook
- **Integração com banco de dados:** Armazene dados de chamadas em seus próprios sistemas
- **Lógica de negócios:** Acione fluxos complexos com base nas variáveis extraídas

---

**Testando Sua Assistente**

Após configurar as definições da sua assistente, é importante testar cuidadosamente antes de implantar em produção.

### Métodos de Teste

<AccordionGroup>
  <Accordion title="Fale com sua Assistente" icon="microphone">
    **Teste baseado na web:** Use o botão **"Fale com sua assistente"** para testar diretamente do seu navegador

    **Recursos:**

    - Conversa por voz em tempo real pelo navegador
    - Teste todas as capacidades da assistente, incluindo ferramentas e base de conhecimento
    - Não requer telefone – ideal para iterações rápidas
    - Feedback imediato sobre respostas e comportamento

    **Melhor para:** Testes rápidos durante o desenvolvimento e configuração
  </Accordion>
  <Accordion title="Teste de Chamada Telefônica" icon="phone">
    **Teste com chamada de telefone real:** Ligue para sua assistente a partir de qualquer número de telefone

    **Assistentes outbound:**

    - Se nenhum número específico estiver definido: A assistente liga de um número aleatório
    - Se o ID do chamador estiver configurado: A assistente liga a partir do número especificado
    - Teste o fluxo completo de chamadas outbound, incluindo discagem e mensagem inicial

    **Assistentes inbound:**

    - Ligue diretamente para o número de telefone atribuído
    - Teste como a assistente lida com chamadas recebidas
    - Verifique o roteamento da chamada e a qualidade da resposta

    **Melhor para:** Testes finais com condições reais de telefone e qualidade de áudio
  </Accordion>
</AccordionGroup>

### Lista de Testes

<Tip>
  **Teste abrangente:** Teste todos os recursos configurados, incluindo ferramentas, consultas à base de conhecimento, extração de variáveis e envio de webhooks.
</Tip>

**Testes essenciais:**

- Clareza da voz e velocidade de resposta
- Integração com a base de conhecimento (se configurada)
- Funcionalidade das ferramentas (transferência, agendamento, etc.)
- Precisão na extração de variáveis
- Entrega de webhooks (verifique se seu endpoint recebe os dados)
- Casos extremos e tratamento de erros

---

**Integração com Widget Web**

Configure sua assistente para funcionar como um widget web no seu site, proporcionando interações contínuas com os clientes.

**Configuração do Widget**

<AccordionGroup>
  <Accordion title="Configuração do Widget" icon="code">
    **Integração fácil:** Adicione sua assistente de IA a qualquer site com um simples trecho de código

    **Recursos:**

    - **Chat por voz:** Clientes podem falar diretamente com sua assistente
    - **Fallback de texto:** Opção para conversas baseadas em texto
    - **Aparência personalizável:** Combine com as cores e estilo da sua marca
    - **Responsivo para dispositivos móveis:** Funciona em todos os dispositivos e tamanhos de tela
  </Accordion>
  <Accordion title="Comportamento do Widget" icon="gear">
    **Interações inteligentes:** O widget se adapta à configuração da sua assistente

    **Capacidades:**

    - Usa a mesma base de conhecimento e ferramentas que a assistente telefônica
    - Suporta todos os idiomas configurados
    - Extrai as mesmas variáveis pós-chamada
    - Envia webhooks para conversas web
    - Respeita o mesmo prompt do sistema e personalidade
  </Accordion>
  <Accordion title="Casos de Uso" icon="lightbulb">
    **Aplicações comuns:**

    - **Suporte ao cliente:** Atendimento automatizado 24/7 no seu site
    - **Qualificação de leads:** Qualifique visitantes antes que entrem em contato com vendas
    - **Agendamento de compromissos:** Permita que os visitantes agendem diretamente pelo widget
    - **Atendimento a FAQs:** Responda perguntas comuns instantaneamente
    - **Demonstrações de produtos:** Oriente os visitantes pelas funcionalidades do seu produto
  </Accordion>
</AccordionGroup>

<Note>
  Para guias detalhados de teste e instruções de integração do widget, consulte nossa documentação "Testando Sua Assistente".
</Note>

<Note>
  Para guias detalhados de integração de webhooks e exemplos, consulte nossa documentação de Automação.
</Note>